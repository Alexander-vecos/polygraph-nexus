# PolyGraph Nexus — документация проекта (пока это план)

> Статус на 2026-01-11 (Europe/Kiev): **проект ещё не реализован**. Ниже — «полная карта местности», чтобы мы могли начать разработку сразу по шагам.

## 1) Что такое PolyGraph Nexus

**PolyGraph Nexus** — это веб‑приложение (PWA) для управления производственными процессами, заказами и коммуникациями в полиграфии/упаковке, с возможностью масштабироваться на несколько «производств/площадок» (например: ИдеяПак, ручное производство, производство товарища).

Система решает типичную боль: данные и процессы раскиданы между бухгалтерией/таблицами/чатами, нет единого места где:
- понятно, **что сейчас в работе** и на каком участке/этапе;
- кто за что отвечает;
- где материалы, резервы и списания;
- где файлы (макеты/превью/переписки);
- как быстро найти исполнителя (внутри команды или среди внешних подрядчиков).

## 2) Для кого

### 2.1. Роли (минимальный набор)
1. **Создатель/Владелец** (ты): настраивает структуры производств, правила, шаблоны.
2. **Менеджер**: ведёт заказы, клиентов, сроки, контроль статусов.
3. **Мастер/Исполнитель**: работает по задачам на участке, отмечает прогресс, QC.
4. **Индивидуальные эксперты** (внешние): консультации/услуги.
5. **Компании/Производства** (внешние подрядчики): услуги, оборудование, мощности.

### 2.2. Сущности реального мира
- **Производство** (Org) → **Площадка** (Facility) → **Сектор** (Sector/Workshop) → **Оборудование** (Equipment)
- **Заказ** (Order) → **Маршрут** (Routing) → **Этапы** (Stages) → **Задачи/Канбан** (Tasks)
- **Материалы** (Materials) → **Склад/банки/остатки** (Inventory/Stocks) → **Резервы/списания** (Reservations/Write-offs)
- **Коммуникация**: чаты/комментарии/обсуждения по заказам и задачам
- **Медиа**: макеты, превью, файлы клиента, фото брака, акты, счёта

## 3) Основная ценность (Value Proposition)

- **Единый источник правды**: в одном месте — заказ, файлы, этапы, чаты, QC.
- **Роутинг заказов**: наглядный маршрут «как изделие проходит по участкам».
- **Складская логика**: движение материалов и контроль резервов (чтобы не «украли сроки»).
- **Производственная дисциплина**: задачи, статусы, ответственность, SLA, дедлайны.
- **Оффлайн‑режим**: PWA, чтобы часть работы была доступна даже при плохом интернете.
- **AI‑помощники**: генерация UI/шаблонов/подсказок (Dev Sandbox) и ассистирование менеджеру.

## 4) Границы MVP (чтобы не утонуть)

### MVP‑1 (самое ядро)
- Авторизация/профили
- Организация → площадки → сектора
- Заказы + статусы + дедлайны
- Канбан/задачи
- Чат/комментарии в контексте заказа/задачи
- Загрузка файлов (макеты/превью/документы)
- Базовый «маршрут заказа» (этапы: печать → резка → сборка → QC → отгрузка)

### MVP‑2 (после стабилизации)
- Склад/материалы/резервы/списания
- Роли и права на уровне RLS (тонко)
- «Справочник» услуг и оборудования
- Внешние подрядчики и матчинги
- Репутация/компетенции работников

### MVP‑3 (когда база готова)
- Интеграции: бухгалтерия/CRM/телеграм‑бот/уведомления
- AI‑генерация интерфейсов/шаблонов/форм
- Аналитика: отчёты, KPI, узкие места производства

## 5) Технологический стек (выбранный)

- **Frontend**: React + TypeScript + Vite (PWA)
- **Backend**: Supabase (PostgreSQL + Auth + Realtime + Storage + Edge Functions)
- **Dev**: Linux (Mint/Ubuntu‑подобное) + VS Code

Почему Supabase:
- PostgreSQL как «взрослая» транзакционная БД
- Auth/Realtime/Storage «из коробки»
- Возможность локальной разработки через Supabase CLI (локальный стек) citeturn0search0turn0search4

## 6) Принципы проектирования

- **Сначала доменная модель** (заказы/маршруты/участки/материалы) → потом UI.
- **Сильная схема + RLS**: безопасность и целостность — на уровне Postgres. citeturn0search6
- **Модульность**: каждую крупную штуку делаем отдельным модулем (Orders, Inventory, Chat).
- **Оффлайн‑first там, где это оправдано**: локальный кэш задач/заказов + синхронизация.
- **AI — не «магия», а инструмент**: ассистенты дают предложения, решения остаются за человеком.

## 7) Термины (глоссарий)

- **Org** — организация/производство
- **Facility** — площадка/цех/точка производства
- **Sector** — участок (шелкография, регенерация, подготовка и т.д.)
- **Order** — заказ (включая атрибуты изделия)
- **Routing** — маршрут заказа (последовательность этапов)
- **Task** — задача (канбан‑карточка)
- **QC** — контроль качества
- **RLS** — Row Level Security (политики доступа на уровне строк)

---

Дальше: см. **NEXT_STEPS.md** — пошаговый старт «с нуля» (Google → GitHub → Supabase → Vite/React → PWA).
